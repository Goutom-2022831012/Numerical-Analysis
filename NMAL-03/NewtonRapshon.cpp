#include <bits/stdc++.h>
using namespace std;

double f(double x) {
    return pow(x, 5) - 3 * x + 5;
}
double f_prime(double x) {
    return 5 * pow(x, 4) - 3;
}

void newtonRaphson(double x0, double tol = 1e-3) {
    cout << fixed << setprecision(6);
    cout << "Iteration\tx\t\tf(x)\t\tError\n";
    double x1, error = 100;
    int i = 0;
    while (error > tol) {
        double fx = f(x0);
        double fpx = f_prime(x0);
        if (fpx == 0) {
            cout << "Derivative is zero. Method fails." << endl;
        return;
        }
        x1 = x0 - fx / fpx;
        if (i != 0)
            error = fabs((x1 - x0) / x1);
        else
            error = 100;
        cout << i << "\t\t" << x0 << "\t" << fx << "\t" << error << endl;
        x0 = x1;
        i++;
    }
    cout << "\nRoot : "<< x1 << endl;
}

int main() {
    newtonRaphson(-0.1);
    return 0;
}
/*
Iteration       x               f(x)            Error
0               -0.100000       5.299990        100.000000
1               1.666958        12.870446       0.276871
2               1.305502        4.875660        0.479479
3               0.882406        2.887768        1.009690
4               -91.061431      -6261412777.678383      0.250000
5               -72.849145      -2051739698.162677      0.250000
6               -58.279318      -672314031.369646       0.250000
7               -46.623457      -220303835.197046       0.250000
8               -37.298770      -72189139.172922        0.250000
9               -29.839026      -23654919.625909        0.249999
10              -23.871240      -7751229.801684 0.249997
11              -19.097030      -2539911.309642 0.249994
12              -15.277701      -832268.537833  0.249984
13              -12.222314      -272709.811733  0.249961
14              -9.778159       -89354.934343   0.249900
15              -7.823150       -29274.269101   0.249746
16              -6.259789       -9587.885982    0.249349
17              -5.010441       -3137.732563    0.248316
18              -4.013760       -1024.693757    0.245616
19              -3.222311       -332.738821     0.238587
20              -2.601602       -106.375512     0.220824
21              -2.131022       -32.554988      0.180069
22              -1.805846       -8.786984       0.107397
23              -1.630713       -1.639408       0.032066
24              -1.580047       -0.107911       0.002431
25              -1.576216       -0.000578       0.000013

Root : -1.576195*/